<!-- MathJax配置，可通过单美元符号书写行内公式等 -->
script(type='text/javascript', src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML')

script(type='text/x-mathjax-config').
  MathJax.Hub.Config({
    tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true,
    ignoreClass: "tex2jax_ignore|dno",
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
    equationNumbers: { autoNumber: "AMS" },
    noUndefined: {attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" }},
    Macros: {href: "{}"}
    },
    messageStyle: "none",
    "HTML-CSS": {
    preferredFont: "TeX",
    availableFonts: ["STIX","TeX"],
    linebreaks: { automatic:true },
    EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) 
    }
    });

<!-- 给MathJax元素添加has-jax class -->
script(type='text/x-mathjax-config').
 MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for(i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });